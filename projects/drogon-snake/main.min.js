var f=document.getElementById("c"),h=f.getContext("2d");f.width=window.innerHeight;f.height=window.innerHeight;h.imageSmoothingEnabled=!1;var n=Math.round(f.height/32),p=document.getElementById("d"),q=!0,t={37:!1,38:!1,39:!1,40:!1};window.onkeydown=function(a){if(0!=d.a.c||40!=a.keyCode)if(1!=d.a.c||37!=a.keyCode)if(2!=d.a.c||39!=a.keyCode)if(3!=d.a.c||38!=a.keyCode)t={37:!1,38:!1,39:!1,40:!1},t[a.keyCode]=!0,1==t[38]?d.a.d=0:1==t[39]?d.a.d=1:1==t[37]?d.a.d=2:1==t[40]&&(d.a.d=3)};
setTimeout(function(){u();v()},0);setInterval(function(){for(var a=0;a<n+1;a++)for(var b=0;b<n+1;b++)h.drawImage(p,16*((a+b)%2+5),0,16,16,32*a,32*b,32,32);for(a=0;a<s.length;a++)b=s[a],h.drawImage(p,16*(0==b.f?1:1==b.f?7:2),0,16,16,32*b.x,32*b.y,48,48);0==d.a.d?(w(),x()):(x(),w())},125);
setInterval(function(){q=!q;y();for(var a=d.b.length,b=0;b<a;b++)d.b[b].x==d.a.x&&d.b[b].y==d.a.y&&(u(),v(),b=a);z();z();a=A(d.a.d);d.a.x+=a[0];d.a.y+=a[1];d.a.c=d.a.d;for(a=0;a<d.b.length;a++)if(b=d.b[a],b.c=b.d,b.g=b.x,b.h=b.y,0==a){var e=A(b.d);b.x+=e[0];b.y+=e[1];b.d=d.a.d}else e=d.b[a-1],b.x=e.g,b.y=e.h,b.d=e.c;d.a.f=0;a=A(d.a.d);a=[d.a.x+a[0],d.a.y+a[1]];for(e=0;e<s.length;e++)b=s[e],1==b.f&&(b.f=2),0==b.f&&(b.x==a[0]&&b.y==a[1]||b.x==d.a.x&&b.y==d.a.y)&&(e=d.b[d.b.length-1],d.b.push({x:e.x,
y:e.y,g:e.g,h:e.h,d:e.c,c:e.c}),B(),d.a.f=1,console.log("sheep get"),b.f=1,e=s.length)},250);function u(){d={a:{x:5,y:5,g:5,h:5,d:2,f:0},b:[{x:6,y:5,g:6,h:5,d:2,c:2},{x:7,y:5,g:7,h:5,d:2,c:2},{x:8,y:5,g:7,h:5,d:2,c:2}]}}function v(){s=[];for(var a=0;4>a;a++)B()}function B(){s.push({x:Math.round(Math.random()*(n-5))+2,y:Math.round(Math.random()*(n-5))+2,f:0})}function A(a){return 0==a?[0,-1]:1==a?[1,0]:2==a?[-1,0]:[0,1]}
function w(){var a=1==d.a.f?0==d.a.d?[6,4]:1==d.a.d?[2,3]:2==d.a.d?[1,3]:[0,3]:0==d.a.d?[6,4]:1==d.a.d?[2,1]:2==d.a.d?[1,1]:[0,1];h.drawImage(p,16*a[0],16*a[1],16,16,32*d.a.x,32*d.a.y,48,48)}
function x(){for(var a=d.b.length,b=1==a?0:Math.round(a/3)-1,e=1==a?0:Math.round(2*a/3)-1,k=0;k<a;k++){var c=d.b[k],l=k==a-1,g=k==b;l=0==c.d&&g?[3,3]:0==c.d&&l?[6,2]:0==c.d?[3,2]:1==c.d&&l?[6,1]:1==c.d?[3,1]:2==c.d&&l?[5,1]:2==c.d?[4,1]:3==c.d&&g?[4,3]:3==c.d&&l?[5,2]:[4,2];h.drawImage(p,16*l[0],16*l[1],16,16,32*c.x,32*c.y,48,48)}for(k=0;k<a;k++){c=d.b[k];g=k==e;l=0==c.d||3==c.d;if(k==b){var m=q?-2:2;if(l)m=q?[2,4,5,4]:[3,4,4,4],h.drawImage(p,16*m[0],16*m[1],16,16,32*(c.x-1),32*c.y,48,48),h.drawImage(p,
16*m[2],16*m[3],16,16,32*(c.x+1),32*c.y,48,48);else if(2!=c.d){var r=q?[2,4]:[3,5];h.drawImage(p,16*r[0],16*r[1],16,16,32*c.x,32*c.y+32/m,48,48)}else 2==c.d&&(r=q?[5,4]:[4,5],h.drawImage(p,16*r[0],16*r[1],16,16,32*c.x,32*c.y+32/m,48,48))}g&&(g=[0,4,1,4],l?(h.drawImage(p,16*g[0],16*g[1],16,16,32*(c.x-1),32*c.y,48,48),h.drawImage(p,16*g[2],16*g[3],16,16,32*(c.x+1),32*c.y,48,48)):2==c.d?h.drawImage(p,16*g[0],16*g[1],16,16,32*c.x,32*c.y+16,48,48):2!=c.d&&h.drawImage(p,16*g[2],16*g[3],16,16,32*c.x,32*
c.y+16,48,48))}}function y(){s.every(function(a){return 0<a.f})&&(u(),v())}function z(){var a=A(d.a.d),b=d.a.x+a[0];a=d.a.y+a[1];!0===(0==b||0==a||b==n-1||a==n-1)&&(d.a.d=0==d.a.d?2:1==d.a.d?0:2==d.a.d?3:1)};